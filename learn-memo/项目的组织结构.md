# Python项目的组织结构

## 包、模块、类
包下包含模块，模块包含类，函数和变量组成类
包可以理解为文件夹，模块可以理解为是一个xxx.py文件，类是xxx.py中class定义的部分，类中可包含函数和变量，函数和变量也可以直接在模块中但不推荐。
函数和变量不属于组织结构

## 包及`__init_.py`
文件夹不是包，含有`__init__.py`模块的文件夹才能算是包
__init_.py模块直接使用包名`<pagename>`调用而不是`<pagename>.__init__`


## 模块导入`import`

`import <parent>.<son>`

use:`<parent>.<son>.xxx`

`import <parent>.<son> as alise`

use:`alise.xxx`

`from <parent> import <son>`

use:`<son>.xxx`

`from <parent> import *`
导入parent内的所有子对象(受parent中的内置变量控制，如`__all__=[a,b]`)

**`__init__.py`的用法**

包被导入时自动执行`__init__.py`，在`__init__.py`中定义变量`__all__=[模块2,模块3]`，控制`from
[packagename] import *`所导入的模块

**相对导入** 

同一包内，一个模块导入另一个模块可使用相对导入，相对导入默认






## 包与模块常见的错误
1. 包和模块不会被重复导入，导入一个模块时模块程序会被执行，多次import一个模块也只能执行一次
2. 避免循环导入

下面是循环依赖的错误案例
>p1.py
>```
>from p2 import p2
>```
>p2.py
>```
>from p1 import p1
>```

## 内置变量
<!--### `dir()`函数显示当前变量-->
**`dir()`函数输出当前所有变量的列表**
```
>>> a=1
>>> b=2
>>> dir()
['__annotations__', '__builtins__', '__doc__', '__loader__', '__name__', '__package__', '__spec__', 'a', 'b']
```

输出内置变量的值
file:`p1.c1.py`
``` python
'''
我是注释
'''
for key in dir():
    exec('print("{}=%r"%{})'.format(key, key))
```

输出
```
__annotations__={}
__builtins__=<module 'builtins' (built-in)>
__cached__=None
__doc__='\n我是注释\n'
__file__='/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1/c1.py'
__loader__=<_frozen_importlib_external.SourceFileLoader object at 0x7f697f1c5128>
__name__='__main__'
__package__=None
__spec__=None
```

**`dir([object])`获取包内的变量列表**

``` python
import sys
infos = dir(sys)
print(infos)

# 输出：
['__displayhook__', '__doc__', '__excepthook__', '__interactivehook__', '__loader__', 
'__name__', '__package__', '__spec__', '__stderr__', '__stdin__', '__stdout__', 
...]
```


**`__init__.py`中输出内置变量及其值**

`__init__.py`:
```
print('=================================')

for key in dir():
    exec('print("{}=%r"%{})'.format(key, key))

print('=================================')
```
import`__init__.py`所在包时(`from p1 import *`)，输出：


```
=================================
__all__=['c1']
__builtins__={'__name__': 'builtins', '__doc__': "Built-in functions, ...}
__cached__='/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1/__pycache__/__init__.cpython-36.pyc'
__doc__=None
__file__='/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1/__init__.py'
__loader__=<_frozen_importlib_external.SourceFileLoader object at 0x7f96ca423a20>
__name__='p1'
__package__='p1'
__path__=['/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1']
__spec__=ModuleSpec(
name='p1', 
loader=<_frozen_importlib_external.SourceFileLoader object at 0x7f96ca423a20>, 
origin='/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1/__init__.py', 
submodule_search_locations=['/media/houzw/_dde_data/PycharmProjects/python-learn-hzw/test/p1']
)
=================================
```




